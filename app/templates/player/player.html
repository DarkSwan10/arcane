{% extends 'base.html' %}
{% block title %}{{ user.player.team.name }}{% endblock %}
{% block content %}

<script type='text/javascript'>
$(document).ready(function(){
 var back = ["#65D122", "#428BCA", "#c941be", "#615560", "#8be874", "f6faa3"];
 var counter = 0;
   $(".pb").each(function(){
    $(this).css({
    'background-image': 'none',
    'background-color': back[counter]
    });
     counter++;
     counter = counter % back.length
  });
var counter = 0;
   $(".pb1").each(function(){
    $(this).css({
    'background-image': 'none',
    'background-color': back[counter]
    });
     counter++;
     counter = counter % back.length
  });
});
</script>
<h1>{{ user.player.team.name }} <span style="font-size:25px" class="badge">{{ user.player.team.points }} 點</span></h1>
<p>（你貢獻了：{{ user.player.points_acquired }} 點）</p>
<div>
  <div class="progress" id="stack">
    {% for each_player in sorted_players %}
      <div class="progress-bar progress-bar-success pb" style="width: {{ each_player.weight|floatformat:0}}%; " >
             <span>{{ each_player.user.last_name }} </span>
      </div>
    {% endfor %}
  </div>
</div>

{% if records %}
<div class="panel-group"  id="accordion">
    <div class="panel panel-default">
        <div class="panel-heading">
            <div class="panel-title">
                <a href="#panel1" class="panel-toggle" data-toggle="collapse" data-parent="#accordion">
                    展開或是收起詳細紀錄
                </a>
            </div>
        </div>
        <div id="panel1" class="panel-collapse collapse">
            <div class="panel-body">
 <table class="table">
    <tr>
        <th id="tablestyle">時間</th>
        <th id="tablestyle">隊員</th>
        <th id="tablestyle">行動類別</th>
        <th id="tablestyle" >詳細資料</th>
        <th id="tablestyle">註解</th>
    </tr>
    {% for record in records|dictsort:"date" reversed %}
    <tr>
        <td id="tablestyle">{{ record.date | date:'m/d H:i' }}</td>
        <td id="tablestyle">{{ record.user.last_name }}</td>
        <td id="tablestyle">{{ record.action_explain }}</td>
        <td id="tablestyle">從卡片 {{ record.card.name }} 中得到了 {{ record.card.value }} 分</td>
        <td id="tablestyle">{{ record.comment }}</td>
    </tr>
    {% endfor %}
</table>
</div>
</div>
</div>
</div>
{% endif %}
{% endblock %}
